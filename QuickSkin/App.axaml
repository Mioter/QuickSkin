<Application xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:semi="https://irihi.tech/semi"
             xmlns:u-Semi="https://irihi.tech/ursa/themes/semi"
             xmlns:u="https://irihi.tech/ursa"
             xmlns:viewModels="clr-namespace:QuickSkin.ViewModels"
             xmlns:ava-Conver="clr-namespace:Avalonia.Controls.Converters;assembly=Avalonia.Controls.ColorPicker"
             xmlns:ava-Primitives-Conver="clr-namespace:Avalonia.Controls.Primitives.Converters;assembly=Avalonia.Controls.ColorPicker"
             xmlns:converters="clr-namespace:QuickSkin.UI.Converters"
             x:Class="QuickSkin.App"
             x:DataType="viewModels:ApplicationViewModel"
             RequestedThemeVariant="Default">
    <!-- "Default" ThemeVariant follows system theme variant. "Dark" or "Light" are other available options. -->

    <Application.Styles>
 
        <semi:SemiPopupAnimations />
        <semi:SemiTheme Locale="zh-CN" />
        <semi:ColorPickerSemiTheme />
        <u-Semi:SemiTheme Locale="zh-CN" />

        <!-- 窗口样式 -->

        <StyleInclude Source="Assets/AvaloniaRes/ThemeTemplates/.index.axaml" />
        <StyleInclude Source="Assets/AvaloniaRes/ControlThemes/.index.axaml" />
        <StyleInclude Source="Assets/AvaloniaRes/Styles/.index.axaml" />
        <StyleInclude Source="Assets/AvaloniaRes/Icons/.index.axaml" />

        <Style Selector="u|TitleBar /template/ u|CaptionButtons#PART_CaptionButtons">
            <Setter Property="MinHeight" Value="40" />
        </Style>

        <Style Selector="u|TitleBar /template/ u|CaptionButtons#PART_CaptionButtons:normal /template/ StackPanel">
            <Setter Property="Margin" Value="5" />
            <Setter Property="Spacing" Value="5" />
        </Style>

        <Style Selector="u|TitleBar /template/ u|CaptionButtons#PART_CaptionButtons /template/ Button">
            <Setter Property="Height" Value="30" />
            <Setter Property="Width" Value="30" />
            <Setter Property="CornerRadius" Value="8" />
        </Style>

        <Style Selector="u|TitleBar /template/ u|CaptionButtons#PART_CaptionButtons">
            <Style Selector="^:normal /template/ PathIcon#PART_CloseButtonIcon">
                <Setter Property="Data" Value="{StaticResource SemiIconClose}" />
                <Setter Property="Height" Value="13.5" />
            </Style>
            <Style Selector="^:maximized /template/ PathIcon#PART_CloseButtonIcon">
                <Setter Property="Data" Value="{StaticResource SemiIconClose}" />
                <Setter Property="Height" Value="13.5" />
            </Style>
        </Style>

        <!-- 控件样式 -->

        <Style Selector="CheckBox">
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>

        <Style Selector="TextBox">
            <Setter Property="CornerRadius" Value="8" />
        </Style>

        <Style Selector="ToolTip /template/ ContentPresenter">
            <Setter Property="FontSize" Value="12" />
        </Style>

        <Style Selector="u|NotificationCard.Light /template/ Button#PART_CloseButton /template/ Border">
            <Setter Property="CornerRadius" Value="5" />
        </Style>

        <Style Selector="u|MessageBoxControl /template/ Button">
            <Setter Property="CornerRadius" Value="8" />
        </Style>

        <Style Selector=":is(u|DrawerControlBase) /template/ Button#PART_CloseButton">
            <Setter Property="CornerRadius" Value="8" />
        </Style>

        <Style
            Selector="TextBox.TextBoxErrorsCenter /template/ DataValidationErrors /template/ ContentControl#InlineDataValidationContentControl">
            <Setter Property="HorizontalAlignment" Value="Center" />
        </Style>

        <Style Selector=":is(u|DialogControlBase) /template/ Button#PART_CloseButton">
            <Setter Property="CornerRadius" Value="12" />
            <Setter Property="Height" Value="25" />
            <Setter Property="Width" Value="25" />

            <Style Selector="^ /template/ PathIcon">
                <Setter Property="Height" Value="15" />
                <Setter Property="Width" Value="15" />
            </Style>

        </Style>
        
        <Style Selector=":is(Button)">
            <Setter Property="Transitions">
                <Transitions>
                    <TransformOperationsTransition Duration="0:0:0.2" Property="RenderTransform" />
                </Transitions>
            </Setter>

            <Style Selector="^:pressed">
                <Setter Property="RenderTransform" Value="scale(0.95)" />
            </Style>

        </Style>

        <Style Selector=":is(u|NumericUpDown)">
            <Setter Property="CornerRadius" Value="8" />
        </Style>

        <Style Selector=":is(ContentControl)">
            <Setter Property="FontFamily" Value="{DynamicResource Cjtw85}" />
        </Style>

    </Application.Styles>

    <Application.Resources>
        
        <ava-Conver:ToBrushConverter x:Key="ToBrushConverter" />
        <ava-Primitives-Conver:ContrastBrushConverter x:Key="ContrastBrushConverter" />
        
        <converters:EnumDescriptionConverter x:Key="EnumDescriptionConverter" />
        <converters:StringCompareConverter x:Key="StringCompareConverter" />
        <converters:StringUnequalConverter x:Key="StringUnequalConverter" />
        <converters:ObjectCompareMultiConverter x:Key="InstanceEqualityMultiConverter" />
        <converters:CalcConverter x:Key="CalcConverter" />

        <FontFamily x:Key="Cjtw85">resm:QuickSkin.Assets.EmbeddedRes.Fonts.CJTW85.ttf#公众号-犬神志</FontFamily>
        <FontFamily x:Key="DefaultFontFamily">fonts:Inter#Inter,$Default</FontFamily>

        <CornerRadius x:Key="FlyoutCornerRadius">8</CornerRadius>

        <CornerRadius x:Key="ButtonCornerRadius">8</CornerRadius>

        <CornerRadius x:Key="ComboBoxSelectorCornerRadius">8</CornerRadius>

    </Application.Resources>

    <TrayIcon.Icons>
        <TrayIcons>
            <TrayIcon Icon="resm:QuickSkin.Assets.EmbeddedRes.app-icon.ico" MacOSProperties.IsTemplateIcon="true"
                      ToolTipText="QwQ Music"
                      Command="{Binding ShowMainWindowCommand}">

                <TrayIcon.Menu>
                    <NativeMenu>
                        <NativeMenuItem Header="显示窗口" Command="{Binding ShowMainWindowCommand}" />
                        <NativeMenuItem Header="退出" Command="{Binding ExitApplicationCommand}" />
                    </NativeMenu>
                </TrayIcon.Menu>

            </TrayIcon>
        </TrayIcons>
    </TrayIcon.Icons>

</Application>